# Shadow - è‹±è¯­å¥å­å­¦ä¹ å¹³å°

ä¸­æ–‡ | [English](./README.md)

Shadow æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„è‹±è¯­å¥å­å­¦ä¹ å¹³å°ï¼Œå¸®åŠ©ç”¨æˆ·é€šè¿‡å½±å­è·Ÿè¯»æ³•ï¼ˆShadowingï¼‰æå‡è‹±è¯­å£è¯­èƒ½åŠ›ã€‚å¹³å°æä¾›å¥å­ç®¡ç†ã€è¯­éŸ³ç”Ÿæˆã€åˆ†ç±»ç»„ç»‡ç­‰åŠŸèƒ½ï¼Œæ”¯æŒå…±äº«å­¦ä¹ èµ„æºå’Œä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ“š å¥å­ç®¡ç†
- **å…±äº«åº“**ï¼šç®¡ç†å‘˜ç²¾é€‰çš„ä¼˜è´¨å­¦ä¹ å¥å­ï¼Œæ‰€æœ‰ç”¨æˆ·å¯è§
- **è‡ªå®šä¹‰å¥å­**ï¼šç”¨æˆ·å¯ä»¥æ·»åŠ å’Œç®¡ç†è‡ªå·±çš„å­¦ä¹ å†…å®¹
- **æ”¶è—åŠŸèƒ½**ï¼šæ ‡è®°é‡è¦å¥å­ï¼Œæ–¹ä¾¿å¤ä¹ 
- **éš¾åº¦åˆ†çº§**ï¼šæ”¯æŒ easy/medium/hard ä¸‰ä¸ªéš¾åº¦ç­‰çº§

### ğŸ”Š è¯­éŸ³åŠŸèƒ½
- **TTS è¯­éŸ³ç”Ÿæˆ**ï¼šè‡ªåŠ¨å°†è‹±æ–‡å¥å­è½¬æ¢ä¸ºé«˜è´¨é‡è¯­éŸ³
- **å¤šç§éŸ³è‰²**ï¼šæ”¯æŒå¤šç§è¯­éŸ³é€‰æ‹©
- **äº‘ç«¯å­˜å‚¨**ï¼šéŸ³é¢‘æ–‡ä»¶è‡ªåŠ¨ä¸Šä¼ è‡³ Cloudflare R2ï¼ŒåŠ è½½å¿«é€Ÿç¨³å®š

### ğŸ·ï¸ åˆ†ç±»ç³»ç»Ÿ
- **é¢„è®¾åˆ†ç±»**ï¼šç³»ç»Ÿå†…ç½®å¸¸ç”¨å­¦ä¹ åœºæ™¯åˆ†ç±»
- **è‡ªå®šä¹‰åˆ†ç±»**ï¼šç”¨æˆ·å¯åˆ›å»ºä¸ªæ€§åŒ–åˆ†ç±»ï¼Œæ”¯æŒè‡ªå®šä¹‰é¢œè‰²
- **çµæ´»ç»„ç»‡**ï¼šè½»æ¾ç®¡ç†ä¸åŒä¸»é¢˜çš„å­¦ä¹ å†…å®¹

### ğŸ‘¥ ç”¨æˆ·ç³»ç»Ÿ
- **å¤šç§ç™»å½•æ–¹å¼**ï¼šæ”¯æŒ Google OAuth å’Œè´¦å·å¯†ç ç™»å½•
- **è§’è‰²æƒé™**ï¼šowner/admin/user ä¸‰çº§æƒé™ç®¡ç†
- **æ•°æ®éš”ç¦»**ï¼šç”¨æˆ·æ•°æ®å®‰å…¨ç‹¬ç«‹

### ğŸ¨ ç°ä»£åŒ–ç•Œé¢
- **å“åº”å¼è®¾è®¡**ï¼šå®Œç¾é€‚é…æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯
- **æ·±è‰²æ¨¡å¼**ï¼šæ”¯æŒæ˜æš—ä¸»é¢˜åˆ‡æ¢
- **æµç•…äº¤äº’**ï¼šåŸºäº Framer Motion çš„ç²¾ç¾åŠ¨ç”»æ•ˆæœ

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯
- **[Next.js 15](https://nextjs.org/)** - React å…¨æ ˆæ¡†æ¶ï¼Œä½¿ç”¨ App Router
- **[React 18](https://react.dev/)** - ç”¨æˆ·ç•Œé¢åº“
- **[TypeScript](https://www.typescriptlang.org/)** - ç±»å‹å®‰å…¨çš„ JavaScript
- **[HeroUI v2](https://heroui.com/)** - ç°ä»£åŒ– React UI ç»„ä»¶åº“
- **[Tailwind CSS](https://tailwindcss.com/)** - åŸå­åŒ– CSS æ¡†æ¶
- **[Framer Motion](https://www.framer.com/motion/)** - åŠ¨ç”»åº“
- **[Lucide React](https://lucide.dev/)** - å›¾æ ‡åº“

### åç«¯
- **[NextAuth.js](https://next-auth.js.org/)** - èº«ä»½è®¤è¯è§£å†³æ–¹æ¡ˆ
- **[Drizzle ORM](https://orm.drizzle.team/)** - ç±»å‹å®‰å…¨çš„ TypeScript ORM
- **[PostgreSQL](https://www.postgresql.org/)** - å…³ç³»å‹æ•°æ®åº“
- **[Cloudflare R2](https://www.cloudflare.com/products/r2/)** - å¯¹è±¡å­˜å‚¨ï¼ˆS3 å…¼å®¹ï¼‰

### å¼€å‘å·¥å…·
- **[ESLint](https://eslint.org/)** - ä»£ç è§„èŒƒæ£€æŸ¥
- **[Prettier](https://prettier.io/)** - ä»£ç æ ¼å¼åŒ–
- **[Drizzle Kit](https://orm.drizzle.team/kit-docs/overview)** - æ•°æ®åº“è¿ç§»å·¥å…·

## ğŸ“‹ å‰ç½®è¦æ±‚

- Node.js >= 18.17.0
- pnpm >= 8.0.0ï¼ˆæ¨èï¼‰æˆ– npm/yarn
- PostgreSQL æ•°æ®åº“
- Cloudflare R2 è´¦æˆ·ï¼ˆç”¨äºéŸ³é¢‘æ–‡ä»¶å­˜å‚¨ï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/your-username/shadow.git
cd shadow
```

### 2. å®‰è£…ä¾èµ–

```bash
pnpm install
```

å¦‚æœä½¿ç”¨ `pnpm`ï¼Œéœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.npmrc` æ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```bash
public-hoist-pattern[]=*@heroui/*
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ `env.example` æ–‡ä»¶ä¸º `.env`ï¼Œå¹¶å¡«å†™å¿…è¦çš„é…ç½®ï¼š

```bash
cp env.example .env
```

é…ç½®è¯´æ˜ï¼š

```env
# æ•°æ®åº“è¿æ¥
DATABASE_URL=postgres://username:password@localhost:5432/shadow

# NextAuth.js é…ç½®
NEXTAUTH_SECRET=your-secret-key-here  # ä½¿ç”¨ openssl rand -base64 32 ç”Ÿæˆ
NEXTAUTH_URL=http://localhost:3000

# Google OAuthï¼ˆå¯é€‰ï¼‰
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# Cloudflare R2 å­˜å‚¨
R2_ACCESS_KEY_ID=your-r2-access-key-id
R2_SECRET_ACCESS_KEY=your-r2-secret-access-key
R2_ENDPOINT=https://your-account-id.r2.cloudflarestorage.com/your-bucket
R2_PUBLIC_BASE_URL=https://your-custom-domain.com
```

### 4. åˆå§‹åŒ–æ•°æ®åº“

```bash
# ç”Ÿæˆæ•°æ®åº“è¿ç§»æ–‡ä»¶
pnpm db:generate

# æ‰§è¡Œæ•°æ®åº“è¿ç§»
pnpm db:push

# åˆå§‹åŒ–æ•°æ®åº“è¡¨
pnpm db:init

# åˆå§‹åŒ–é¢„è®¾åˆ†ç±»
pnpm db:init-categories
```

### 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
pnpm dev
```

è®¿é—® [http://localhost:3000](http://localhost:3000) æŸ¥çœ‹åº”ç”¨ã€‚

## ğŸ“¦ å¯ç”¨è„šæœ¬

```bash
# å¼€å‘
pnpm dev          # å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆä½¿ç”¨ Turbopackï¼‰
pnpm build        # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm start        # å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
pnpm lint         # ä»£ç æ£€æŸ¥å’Œè‡ªåŠ¨ä¿®å¤

# æ•°æ®åº“
pnpm db:generate  # ç”Ÿæˆè¿ç§»æ–‡ä»¶
pnpm db:migrate   # æ‰§è¡Œè¿ç§»
pnpm db:push      # æ¨é€ schema åˆ°æ•°æ®åº“
pnpm db:studio    # å¯åŠ¨ Drizzle Studioï¼ˆæ•°æ®åº“å¯è§†åŒ–å·¥å…·ï¼‰
pnpm db:init      # åˆå§‹åŒ–æ•°æ®åº“
pnpm db:init-categories  # åˆå§‹åŒ–é¢„è®¾åˆ†ç±»
```

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
shadow/
â”œâ”€â”€ app/                      # Next.js App Router
â”‚   â”œâ”€â”€ (auth)/              # è®¤è¯ç›¸å…³é¡µé¢
â”‚   â”‚   â””â”€â”€ sign-in/         # ç™»å½•é¡µé¢
â”‚   â”œâ”€â”€ (main)/              # ä¸»åº”ç”¨é¡µé¢
â”‚   â”‚   â”œâ”€â”€ dashboard/       # ä»ªè¡¨æ¿
â”‚   â”‚   â”œâ”€â”€ sentence/        # å¥å­ç®¡ç†é¡µé¢
â”‚   â”‚   â””â”€â”€ settings/        # è®¾ç½®é¡µé¢
â”‚   â””â”€â”€ api/                 # API è·¯ç”±
â”‚       â”œâ”€â”€ auth/            # è®¤è¯ API
â”‚       â”œâ”€â”€ categories/      # åˆ†ç±» API
â”‚       â”œâ”€â”€ sentences/       # å¥å­ API
â”‚       â””â”€â”€ tts/             # TTS è¯­éŸ³ç”Ÿæˆ API
â”œâ”€â”€ components/              # React ç»„ä»¶
â”‚   â”œâ”€â”€ add-sentence-modal.tsx
â”‚   â”œâ”€â”€ edit-sentence-modal.tsx
â”‚   â”œâ”€â”€ sentence-list.tsx
â”‚   â””â”€â”€ navbar.tsx
â”œâ”€â”€ lib/                     # å·¥å…·åº“
â”‚   â”œâ”€â”€ auth/               # è®¤è¯é…ç½®
â”‚   â”œâ”€â”€ db/                 # æ•°æ®åº“é…ç½®å’Œ Schema
â”‚   â””â”€â”€ tts/                # TTS è¯­éŸ³ç”Ÿæˆ
â”œâ”€â”€ config/                  # åº”ç”¨é…ç½®
â”œâ”€â”€ styles/                  # å…¨å±€æ ·å¼
â”œâ”€â”€ types/                   # TypeScript ç±»å‹å®šä¹‰
â””â”€â”€ scripts/                 # è„šæœ¬æ–‡ä»¶
```

## ğŸ” è®¤è¯é…ç½®

### Google OAuth é…ç½®

1. è®¿é—® [Google Cloud Console](https://console.cloud.google.com/)
2. åˆ›å»ºæ–°é¡¹ç›®æˆ–é€‰æ‹©ç°æœ‰é¡¹ç›®
3. å¯ç”¨ Google+ API
4. åˆ›å»º OAuth 2.0 å‡­æ®
5. é…ç½®æˆæƒé‡å®šå‘ URIï¼š`http://localhost:3000/api/auth/callback/google`
6. å°† Client ID å’Œ Client Secret æ·»åŠ åˆ° `.env` æ–‡ä»¶

## ğŸ™ï¸ TTS é…ç½®

é¡¹ç›®ä½¿ç”¨æœ¬åœ° TTS æœåŠ¡ï¼ˆé»˜è®¤ç«¯å£ 8880ï¼‰ç”Ÿæˆè¯­éŸ³ã€‚æ‚¨éœ€è¦ï¼š

1. éƒ¨ç½²æˆ–è¿è¡Œå…¼å®¹ OpenAI TTS API çš„æœ¬åœ°æœåŠ¡
2. é…ç½® Cloudflare R2 å­˜å‚¨æ¡¶ç”¨äºå­˜å‚¨éŸ³é¢‘æ–‡ä»¶
3. è®¾ç½® R2 å…¬å¼€è®¿é—®åŸŸåä»¥æä¾›éŸ³é¢‘è®¿é—®

## ğŸŒ éƒ¨ç½²

### Vercel éƒ¨ç½²ï¼ˆæ¨èï¼‰

1. å°†é¡¹ç›®æ¨é€åˆ° GitHub
2. åœ¨ [Vercel](https://vercel.com) å¯¼å…¥é¡¹ç›®
3. é…ç½®ç¯å¢ƒå˜é‡
4. éƒ¨ç½²

### Docker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker build -t shadow .

# è¿è¡Œå®¹å™¨
docker run -p 3000:3000 --env-file .env shadow
```

## ğŸ“ å¼€å‘æ³¨æ„äº‹é¡¹

### æ•°æ®åº“ Schema ä¿®æ”¹

1. ä¿®æ”¹ `lib/db/schema.ts` ä¸­çš„è¡¨ç»“æ„
2. è¿è¡Œ `pnpm db:generate` ç”Ÿæˆè¿ç§»æ–‡ä»¶
3. è¿è¡Œ `pnpm db:push` åº”ç”¨æ›´æ”¹

### ä»£ç è§„èŒƒ

- éµå¾ª [DRY åŸåˆ™](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself)ï¼ˆDon't Repeat Yourselfï¼‰
- éµå¾ª [KISS åŸåˆ™](https://en.wikipedia.org/wiki/KISS_principle)ï¼ˆKeep It Simple, Stupidï¼‰
- éµå¾ª [SOLID åŸåˆ™](https://en.wikipedia.org/wiki/SOLID)
- ä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹å®‰å…¨å¼€å‘
- æäº¤å‰è¿è¡Œ `pnpm lint` æ£€æŸ¥ä»£ç 

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT è®¸å¯è¯](LICENSE)ã€‚

## ğŸ™ è‡´è°¢

- [HeroUI](https://heroui.com/) - æä¾›ä¼˜ç§€çš„ UI ç»„ä»¶åº“
- [Next.js](https://nextjs.org/) - å¼ºå¤§çš„ React æ¡†æ¶
- [Drizzle ORM](https://orm.drizzle.team/) - ç±»å‹å®‰å…¨çš„ ORM

---

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿æäº¤ [Issue](https://github.com/your-username/shadow/issues)ã€‚

